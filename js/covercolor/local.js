let coverColor=(e=!1)=>{var o,r;e?(o=document.querySelector("#nav-music .aplayer-pic").style.backgroundImage,(o=(r=/url\("([^"]+)"\)/.exec(o))?r[1]:"")&&localColor(o,e)):(r=PAGE_CONFIG.color||document.getElementById("post-cover")?.src)?localColor(r):setDefaultThemeColors()},setDefaultThemeColors=()=>{Object.entries({"--efu-main":"var(--efu-theme)","--efu-main-op":"var(--efu-theme-op)","--efu-main-op-deep":"var(--efu-theme-op-deep)","--efu-main-none":"var(--efu-theme-none)"}).forEach(([e,o])=>{document.documentElement.style.setProperty(e,o)}),initThemeColor()},localColor=(e,o=!1)=>{let r=new ColorThief,t=new Image;t.crossOrigin="Anonymous",t.onload=()=>{var e=r.getColor(t);o?setMusicColor(rgbToHex(e)):setThemeColors(rgbToHex(e),...e)},t.onerror=()=>console.error("Image Error"),t.src=e},rgbToHex=([e,o,r])=>"#"+[e,o,r].map(e=>Math.floor(.8*e).toString(16).padStart(2,"0")).join(""),setMusicColor=e=>{if(!e)return setDefaultThemeColors();document.querySelector("#nav-music").style.setProperty("--efu-music",e)},setThemeColors=(e,o=null,r=null,t=null)=>{if(!e)return setDefaultThemeColors();Object.entries({"--efu-main":e,"--efu-main-op":e+"23","--efu-main-op-deep":e+"dd","--efu-main-none":e+"00"}).forEach(([e,o])=>{document.documentElement.style.setProperty(e,o)}),null!==o&&null!==r&&null!==t&&Math.round((299*o+587*r+114*t)/1e3)<125&&(adjustCardStyles(),e=LightenDarkenColor(e,50),setThemeColors(e)),document.getElementById("coverdiv").classList.add("loaded"),initThemeColor()},LightenDarkenColor=(e,o)=>{let r=!1;"#"===e[0]&&(e=e.slice(1),r=!0);var e=parseInt(e,16),t=(e>>16)+o,l=(e>>8&255)+o,e=(255&e)+o,t=Math.max(Math.min(t,255),0),l=Math.max(Math.min(l,255),0),e=Math.max(Math.min(e,255),0);return(r?"#":"")+((1<<24)+(t<<16)+(l<<8)+e).toString(16).slice(1)},adjustCardStyles=()=>{document.querySelectorAll(".card-content").forEach(e=>{e.style.setProperty("--efu-card-bg","var(--efu-white)")}),document.querySelectorAll(".sayhi").forEach(e=>{e.style.setProperty("background","var(--efu-white-op)"),e.style.setProperty("color","var(--efu-white)")})};